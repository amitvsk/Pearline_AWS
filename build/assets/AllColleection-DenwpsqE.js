import{c as Z,r as l,a as ee,b as te,j as t,o as se,p as ae,q as le,I as re,s as p,d as ce,F as ie,B as ne,e as o,t as oe,v as xe,w as de}from"./index-BJV0pVjq.js";function he(){const C=Z(),[r,S]=l.useState(!0),[n,_]=l.useState("Trending Now"),[E,$]=l.useState(!1),[L,h]=l.useState(!1),[i,x]=l.useState({availability:!0,category:!0,metals:!0,price:!0}),[d,F]=l.useState({inStock:!0,outOfStock:!1}),[T,D]=l.useState([]),[M,I]=l.useState([]),[z,W]=l.useState([]),[u,q]=l.useState([]),[g,A]=l.useState([]),[j,B]=l.useState([]),[y,O]=l.useState([]),[b,R]=l.useState([]),[m,N]=l.useState({min:0,max:1e5}),[H,G]=l.useState(null),[f,v]=l.useState([]),[U,J]=l.useState([]),[me,K]=l.useState({categories:[],collections:[],metals:[],types:[]}),{addToCart:Q}=ee(),{currency:w}=te();l.useEffect(()=>{const e=async()=>{try{const a=await o.get("http://localhost:8080/product");J(a.data)}catch(a){console.error("Error fetching products:",a)}},s=async()=>{try{const[a,c]=await Promise.all([o.get("http://localhost:8080/product/filters"),o.get("http://localhost:8080/collection")]);K(a.data),D(a.data.categories),W(a.data.metals),q(a.data.types),I(c.data)}catch(a){console.error("Error fetching filters:",a)}};e(),s(),window.scrollTo(0,0)},[]);const P=U.filter(e=>!!(d.inStock&&e.status==="Available"||d.outOfStock&&e.status==="Out of stock"||!d.inStock&&!d.outOfStock)).filter(e=>g.length===0||g.includes(e.category)).filter(e=>j.length===0||j.includes(e.collection?._id)).filter(e=>y.length===0||y.includes(e.metal)).filter(e=>b.length===0||b.includes(e.type)).filter(e=>e.price>=m.min&&e.price<=m.max).sort((e,s)=>{if(u.includes(n))return e.type===n&&s.type!==n?-1:s.type===n&&e.type!==n?1:0;switch(n){case"Rating - Highest":return s.rating-e.rating;case"Rating - Lowest":return e.rating-s.rating;case"Price Low to High":return e.price-s.price;case"Price High to Low":return s.price-e.price;default:return 0}}),V=e=>{const s=[],a=Math.floor(e),c=e%1>=.5;for(let k=0;k<a;k++)s.push(t.jsx(oe,{color:"#FFA600"},k));for(c&&s.push(t.jsx(xe,{color:"#FFA600"},"half"));s.length<5;)s.push(t.jsx(de,{color:"#f5a623"},s.length));return s},X=[...u,"Rating - Highest","Rating - Lowest","Price Low to High","Price High to Low"];l.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("token");if(!s)return;const a=await o.get("http://localhost:8080/wishlist",{headers:{Authorization:`Bearer ${s}`}});v(a.data.map(c=>c.product._id))}catch(s){console.error("Error fetching wishlist:",s.response?.data||s)}})()},[]);const Y=async e=>{try{const s=localStorage.getItem("token");if(!s){alert("Login required to add wishlist!");return}f.includes(e)?(await o.post("http://localhost:8080/wishlist/remove",{productId:e},{headers:{Authorization:`Bearer ${s}`}}),v(f.filter(a=>a!==e))):(await o.post("http://localhost:8080/wishlist/add",{productId:e},{headers:{Authorization:`Bearer ${s}`}}),v([...f,e]))}catch(s){console.error("Error handling wishlist:",s.response?.data||s)}};return l.useEffect(()=>{(async()=>{try{const s=await o.get("http://localhost:8080/arrival/banner");s.data?.image&&G(s.data.image)}catch(s){console.error("Error fetching banner:",s)}})()},[]),t.jsxs("div",{className:"font-sans",children:[t.jsx("div",{className:"relative h-[300px] sm:h-[400px] md:h-[500px] lg:h-[600px] xl:h-[800px] bg-cover bg-center",style:{backgroundImage:H?`url(${H})`:"url(/fallback.jpg)"},children:t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"})}),t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between border-b border-[#838383] py-3 bg-white px-4 sm:px-6 md:px-10 lg:px-20 h-auto md:h-[75px]",children:[t.jsxs("div",{className:"flex items-center justify-between w-full gap-2 py-2 pr-0 cursor-pointer md:pr-6 md:w-auto md:justify-start md:py-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-[16px] sm:text-[18px] md:text-[20px] font-[400] text-[#000000]",onClick:()=>h(!0),style:{fontFamily:"Nunito Sans"},children:"Filter"}),t.jsx(se,{className:"text-[#9C1137] text-lg",onClick:()=>h(!0)})]}),t.jsxs("div",{className:"flex items-center gap-4 px-0 border-r-0 border-gray-300 md:px-6 md:border-r",children:[t.jsx("button",{className:`p-1 rounded ${r?"bg-[#9C1137]/10":""}`,onClick:()=>S(!0),children:t.jsx(ae,{className:`text-xl ${r?"text-[#9C1137]":"text-[#222222]"}`})}),t.jsx("button",{className:`p-1 rounded ${r?"":"bg-[#8B1538]/10"}`,onClick:()=>S(!1),children:t.jsx(le,{className:`text-xl ${r?"text-[#222222]":"text-[#8B1538]"}`})})]})]}),t.jsx("div",{className:"w-full px-0 py-2 text-center border-b-0 border-gray-200 md:px-6 md:border-b md:w-auto md:text-left md:py-0",children:t.jsxs("span",{className:"text-[16px] sm:text-[18px] md:text-[20px] font-[400] text-[#9C1137]",style:{fontFamily:"Nunito Sans"},children:[P.length," products"]})}),t.jsxs("div",{className:"relative flex items-center justify-center w-full gap-2 py-2 pl-0 border-b-0 border-gray-200 md:pl-6 md:border-b md:w-auto md:justify-start md:py-0",children:[t.jsx("span",{className:"text-[400] text-[16px] sm:text-[18px] md:text-[20px]",style:{fontFamily:"Nunito Sans"},children:"Sort by:"}),t.jsxs("button",{className:"flex items-center gap-1 text-[#000000] font-medium focus:outline-none",onClick:()=>$(e=>!e),style:{fontFamily:"Nunito Sans"},children:[n,t.jsx(re,{className:"text-[#9C1137] ml-1"})]}),E&&t.jsx("ul",{className:"absolute right-0 z-20 w-48 mt-2 bg-white border border-gray-200 rounded shadow top-full",children:X.map(e=>t.jsx("li",{className:"hover:bg-gray-100 px-4 py-2 cursor-pointer text-[#000000]",onClick:()=>{_(e),$(!1)},style:{fontFamily:"Nunito Sans"},children:e},e))})]})]}),L&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-30",onClick:()=>h(!1)}),t.jsxs("div",{className:"fixed top-0 left-0 z-50 w-64 h-full p-4 overflow-y-auto bg-white shadow-xl sm:p-6 sm:w-80 rounded-r-2xl",children:[t.jsx("button",{className:"absolute text-2xl text-gray-500 top-4 right-4 hover:text-black",onClick:()=>h(!1),children:"×"}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(e=>({...e,availability:!e.availability})),children:[t.jsx("span",{className:"font-[700] text-[18px]",children:"Availability"}),t.jsx(p,{className:`transition-transform ${i.availability?"":"rotate-180"}`})]}),i.availability&&t.jsxs("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:[t.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[t.jsx("input",{type:"checkbox",checked:d.inStock,onChange:e=>F(s=>({...s,inStock:e.target.checked})),className:"accent-[#9C1137]"})," ","In Stock"]}),t.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[t.jsx("input",{type:"checkbox",checked:d.outOfStock,onChange:e=>F(s=>({...s,outOfStock:e.target.checked})),className:"accent-[#9C1137]"})," ","Out of Stock"]})]}),t.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(e=>({...e,category:!e.category})),children:[t.jsx("span",{className:"font-[700] text-[18px]",children:"Category"}),t.jsx(p,{className:`transition-transform ${i.category?"":"rotate-180"}`})]}),i.category&&t.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:T.map(e=>t.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[t.jsx("input",{type:"checkbox",checked:g.includes(e),onChange:s=>{s.target.checked?A(a=>[...a,e]):A(a=>a.filter(c=>c!==e))},className:"accent-[#8B1538]"})," ",e]},e))}),t.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(e=>({...e,collections:!e.collections})),children:[t.jsx("span",{className:"font-[700] text-[18px]",children:"Collection"}),t.jsx(p,{className:`transition-transform ${i.collections?"":"rotate-180"}`})]}),i.collections&&t.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:M.map(e=>t.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[t.jsx("input",{type:"checkbox",checked:j.includes(e._id),onChange:s=>{s.target.checked?B(a=>[...a,e._id]):B(a=>a.filter(c=>c!==e._id))},className:"accent-[#8B1538]"}),e.title," "]},e._id))}),t.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(e=>({...e,metals:!e.metals})),children:[t.jsx("span",{className:"font-[700] text-[18px]",children:"Metals"}),t.jsx(p,{className:`transition-transform ${i.metals?"":"rotate-180"}`})]}),i.metals&&t.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:z.map(e=>t.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[t.jsx("input",{type:"checkbox",checked:y.includes(e),onChange:s=>{s.target.checked?O(a=>[...a,e]):O(a=>a.filter(c=>c!==e))},className:"accent-[#8B1538]"})," ",e]},e))}),t.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(e=>({...e,types:!e.types})),children:[t.jsx("span",{className:"font-[700] text-[18px]",children:"Type"}),t.jsx(p,{className:`transition-transform ${i.types?"":"rotate-180"}`})]}),i.types&&t.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:u.map(e=>t.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[t.jsx("input",{type:"checkbox",checked:b.includes(e),onChange:s=>{s.target.checked?R(a=>[...a,e]):R(a=>a.filter(c=>c!==e))},className:"accent-[#8B1538]"})," ",e]},e))}),t.jsx("hr",{className:"my-3 border-[#9C1137]"}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(e=>({...e,price:!e.price})),children:[t.jsx("span",{className:"font-[700] text-[18px]",children:"Price"}),t.jsx(p,{className:`transition-transform ${i.price?"":"rotate-180"}`})]}),i.price&&t.jsxs("div",{className:"flex flex-col gap-3 mt-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",min:"0",value:m.min,onChange:e=>N(s=>({...s,min:Number(e.target.value)})),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Min"}),t.jsx("span",{children:"-"}),t.jsx("input",{type:"number",min:"0",value:m.max,onChange:e=>N(s=>({...s,max:Number(e.target.value)})),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Max"})]}),t.jsx("input",{type:"range",min:"0",max:"200000",step:"500",value:m.max,onChange:e=>N(s=>({...s,max:Number(e.target.value)})),className:"w-full accent-[#9C1137]"}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Up to ₹",m.max]})]}),t.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{className:"w-full bg-[#9C1137] text-white py-2 px-4 rounded-lg font-semibold hover:bg-[#7e0f2d] transition",onClick:()=>h(!1),children:"Apply Filters"})})]})]})]}),t.jsx("div",{className:`grid ${r?"grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1"} gap-4 sm:gap-6 px-4 sm:px-6 md:px-10 lg:px-20 py-6`,children:P.map(e=>t.jsxs("div",{className:`p-3 rounded hover:shadow ${r?"":"flex flex-col md:flex-row items-center gap-4"}`,children:[t.jsx("div",{className:"cursor-pointer",onClick:()=>C(`/product/${e._id}`),children:t.jsx("img",{src:e.image,alt:e.product,className:`${r?"w-full h-[200px] sm:h-[250px] md:h-[300px] rounded-[20px] sm:rounded-[30px] object-contain":"w-full md:w-[200px] lg:w-[300px] h-[200px] md:h-[250px] object-contain rounded-[20px]"}`})}),t.jsxs("div",{className:`${r?"mt-2":"flex-1 flex flex-col justify-between mt-4 md:mt-0"}`,children:[t.jsx("h3",{className:`${r?"text-[14px] sm:text-[15px] font-[400] mt-2 cursor-pointer":"text-[20px] sm:text-[24px] md:text-[30px] mb-1 cursor-pointer"}`,onClick:()=>C(`/product/${e._id}`),children:r&&e.product.length>60?`${e.product.substring(0,60)}...`:e.product}),!r&&t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"flex gap-1",children:V(e.rating)}),t.jsxs("span",{className:"text-sm",children:["(",e.rating,")"]})]}),t.jsxs("div",{className:`${r?"flex flex-col sm:flex-row sm:items-center sm:justify-between mt-2 gap-2":""}`,children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[t.jsx("div",{className:`${r?"text-[16px] sm:text-[18px] md:text-[20px] font-[700]":"text-[24px] md:text-[30px] font-[700]"}`,children:w==="INR"?`₹ ${e.price}`:`$ ${e.usdPrice}`}),e.discount>0&&t.jsx("div",{className:`${r?"text-[12px] sm:text-[14px] text-[#838383] line-through":"text-[16px] md:text-[20px] text-[#838383] line-through"}`,children:w==="INR"?`₹${e.price}`:""}),e.discount>0&&t.jsx("div",{className:`${r?"text-[12px] sm:text-[14px] text-[#DA2929] font-[600]":"text-[16px] md:text-[20px] text-[#DA2929] font-[600]"}`,children:w==="INR"?"(₹{product.discount} Off)":""})]}),t.jsxs("div",{className:`${r?"flex items-center gap-4 justify-start sm:justify-end":"flex items-center gap-4 md:gap-10 flex-wrap"}`,children:[t.jsxs("button",{className:"text-[#222222] hover:text-black text-sm sm:text-base flex items-center gap-2",onClick:()=>Y(e._id),children:[f.includes(e._id)?t.jsx(ce,{color:"#9C1137"}):t.jsx(ie,{}),!r&&"Add to Wishlist"]}),t.jsxs("button",{className:"text-[#222222] hover:text-black text-sm sm:text-base flex items-center gap-2",onClick:()=>Q(e),children:[t.jsx(ne,{})," ",!r&&"Add to Bag"]})]})]})]})]},e._id))})]})}export{he as default};
