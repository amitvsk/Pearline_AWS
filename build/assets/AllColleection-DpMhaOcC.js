import{h as ae,r as i,d as le,e as ie,f as re,j as e,T as ce,w as ne,x as oe,y as xe,I as de,z as p,k as me,F as k,B as R,v as n,l as u,C as pe,D as he,E as ue}from"./index-B3-ldO5w.js";function Ne(){const C=ae(),[r,S]=i.useState(!0),[o,T]=i.useState("Trending Now"),[H,$]=i.useState(!1),[L,h]=i.useState(!1),[c,x]=i.useState({availability:!0,category:!0,metals:!0,price:!0}),[d,F]=i.useState({inStock:!0,outOfStock:!1}),[W,E]=i.useState([]),[M,z]=i.useState([]),[G,U]=i.useState([]),[f,q]=i.useState([]),[g,O]=i.useState([]),[j,A]=i.useState([]),[y,B]=i.useState([]),[N,P]=i.useState([]),[m,b]=i.useState({min:0,max:1e5}),[_,J]=i.useState(null),[fe,ge]=i.useState([]),[K,Q]=i.useState([]),[je,V]=i.useState({categories:[],collections:[],metals:[],types:[]}),{addToCart:X}=le(),{currency:v}=ie(),{wishlist:D,removeFromWishlist:Y,addToWishlist:Z}=re();i.useEffect(()=>{const t=async()=>{try{const a=await u.get("https://pearline.in/product");Q(a.data)}catch(a){console.error("Error fetching products:",a)}},s=async()=>{try{const[a,l]=await Promise.all([u.get("https://pearline.in/product/filters"),u.get("https://pearline.in/collection")]);V(a.data),E(a.data.categories),U(a.data.metals),q(a.data.types),z(l.data)}catch(a){console.error("Error fetching filters:",a)}};t(),s(),window.scrollTo(0,0)},[]);const I=K.filter(t=>!!(d.inStock&&t.status==="Available"||d.outOfStock&&t.status==="Out of stock"||!d.inStock&&!d.outOfStock)).filter(t=>g.length===0||g.includes(t.category)).filter(t=>j.length===0||j.includes(t.collection?._id)).filter(t=>y.length===0||y.includes(t.metal)).filter(t=>N.length===0||N.includes(t.type)).filter(t=>t.price>=m.min&&t.price<=m.max).sort((t,s)=>{if(f.includes(o))return t.type===o&&s.type!==o?-1:s.type===o&&t.type!==o?1:0;switch(o){case"Rating - Highest":return s.rating-t.rating;case"Rating - Lowest":return t.rating-s.rating;case"Price Low to High":return t.price-s.price;case"Price High to Low":return s.price-t.price;default:return 0}}),ee=t=>{const s=[],a=Math.floor(t),l=t%1>=.5;for(let w=0;w<a;w++)s.push(e.jsx(pe,{color:"#FFA600"},w));for(l&&s.push(e.jsx(he,{color:"#FFA600"},"half"));s.length<5;)s.push(e.jsx(ue,{color:"#f5a623"},s.length));return s},te=[...f,"Rating - Highest","Rating - Lowest","Price Low to High","Price High to Low"],se=t=>{D.some(a=>a.product._id===t._id)?(Y(t._id),localStorage.getItem("token")?n.custom(l=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 rounded-lg shadow-md text-[#9C1137] ",style:{backgroundColor:"#fff",border:"1px solid #9C1137"},children:[e.jsx(k,{className:"mt-1 text-lg text-[#9C1137] w-[28px] h-[28px]"}),t.product," removed from wishlist",e.jsx("button",{className:"ml-2 text-[#9c1137] hover:text-gray-200",onClick:()=>n.dismiss(l),children:"✕"})]})):n.custom(l=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:["Please Log in to remove from wishlist !!!",e.jsx("button",{className:"ml-2 text-white hover:text-gray-200",onClick:()=>n.dismiss(l),children:"✕"})]}))):(Z(t),localStorage.getItem("token")?n.custom(l=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:[e.jsx(k,{className:"mt-1 text-lg text-white w-[28px] h-[28px]"}),t.product," added to wishlist",e.jsx("button",{className:"ml-2 text-white hover:text-gray-200",onClick:()=>n.dismiss(l),children:"✕"})]})):n.custom(l=>e.jsx("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:"Please Log in to add to the wishlist !!!"})))};return i.useEffect(()=>{(async()=>{try{const s=await u.get("https://pearline.in/arrival/banner");s.data?.image&&J(s.data.image)}catch(s){console.error("Error fetching banner:",s)}})()},[]),e.jsxs("div",{className:"font-sans",children:[e.jsx(ce,{position:"top-right",richColors:!0,closeButton:!0}),e.jsx("div",{className:"relative h-[300px] sm:h-[400px] md:h-[500px] lg:h-[600px] xl:h-[800px] bg-cover bg-center",style:{backgroundImage:_?`url(${_})`:"url(/fallback.jpg)"},children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between border-b border-[#838383] py-3 bg-white px-4 sm:px-6 md:px-10 lg:px-20 h-auto md:h-[75px]",children:[e.jsxs("div",{className:"flex items-center justify-between w-full gap-2 py-2 pr-0 cursor-pointer md:pr-6 md:w-auto md:justify-start md:py-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[16px] sm:text-[18px] md:text-[20px] font-[400] text-[#000000]",onClick:()=>h(!0),style:{fontFamily:"Nunito Sans"},children:"Filter"}),e.jsx(ne,{className:"text-[#9C1137] text-lg",onClick:()=>h(!0)})]}),e.jsxs("div",{className:"flex items-center gap-4 px-0 border-r-0 border-gray-300 md:px-6 md:border-r",children:[e.jsx("button",{className:`p-1 rounded ${r?"bg-[#9C1137]/10":""}`,onClick:()=>S(!0),children:e.jsx(oe,{className:`text-xl ${r?"text-[#9C1137]":"text-[#222222]"}`})}),e.jsx("button",{className:`p-1 rounded ${r?"":"bg-[#8B1538]/10"}`,onClick:()=>S(!1),children:e.jsx(xe,{className:`text-xl ${r?"text-[#222222]":"text-[#8B1538]"}`})})]})]}),e.jsx("div",{className:"w-full px-0 py-2 text-center border-b-0 border-gray-200 md:px-6 md:border-b md:w-auto md:text-left md:py-0",children:e.jsxs("span",{className:"text-[16px] sm:text-[18px] md:text-[20px] font-[400] text-[#9C1137]",style:{fontFamily:"Nunito Sans"},children:[I.length," products"]})}),e.jsxs("div",{className:"relative flex items-center justify-center w-full gap-2 py-2 pl-0 border-b-0 border-gray-200 md:pl-6 md:border-b md:w-auto md:justify-start md:py-0",children:[e.jsx("span",{className:"text-[400] text-[16px] sm:text-[18px] md:text-[20px]",style:{fontFamily:"Nunito Sans"},children:"Sort by:"}),e.jsxs("button",{className:"flex items-center gap-1 text-[#000000] font-medium focus:outline-none",onClick:()=>$(t=>!t),style:{fontFamily:"Nunito Sans"},children:[o,e.jsx(de,{className:"text-[#9C1137] ml-1"})]}),H&&e.jsx("ul",{className:"absolute right-0 z-20 w-48 mt-2 bg-white border border-gray-200 rounded shadow top-full",children:te.map(t=>e.jsx("li",{className:"hover:bg-gray-100 px-4 py-2 cursor-pointer text-[#000000]",onClick:()=>{T(t),$(!1)},style:{fontFamily:"Nunito Sans"},children:t},t))})]})]}),L&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-30",onClick:()=>h(!1)}),e.jsxs("div",{className:"fixed top-0 left-0 z-50 w-64 h-full p-4 overflow-y-auto bg-white shadow-xl sm:p-6 sm:w-80 rounded-r-2xl",children:[e.jsx("button",{className:"absolute text-2xl text-gray-500 top-4 right-4 hover:text-black",onClick:()=>h(!1),children:"×"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,availability:!t.availability})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Availability"}),e.jsx(p,{className:`transition-transform ${c.availability?"":"rotate-180"}`})]}),c.availability&&e.jsxs("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:[e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:d.inStock,onChange:t=>F(s=>({...s,inStock:t.target.checked})),className:"accent-[#9C1137]"})," ","In Stock"]}),e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:d.outOfStock,onChange:t=>F(s=>({...s,outOfStock:t.target.checked})),className:"accent-[#9C1137]"})," ","Out of Stock"]})]}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,category:!t.category})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Category"}),e.jsx(p,{className:`transition-transform ${c.category?"":"rotate-180"}`})]}),c.category&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:W.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:g.includes(t),onChange:s=>{s.target.checked?O(a=>[...a,t]):O(a=>a.filter(l=>l!==t))},className:"accent-[#8B1538]"})," ",t]},t))}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,collections:!t.collections})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Collection"}),e.jsx(p,{className:`transition-transform ${c.collections?"":"rotate-180"}`})]}),c.collections&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:M.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:j.includes(t._id),onChange:s=>{s.target.checked?A(a=>[...a,t._id]):A(a=>a.filter(l=>l!==t._id))},className:"accent-[#8B1538]"}),t.title," "]},t._id))}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,metals:!t.metals})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Metals"}),e.jsx(p,{className:`transition-transform ${c.metals?"":"rotate-180"}`})]}),c.metals&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:G.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:y.includes(t),onChange:s=>{s.target.checked?B(a=>[...a,t]):B(a=>a.filter(l=>l!==t))},className:"accent-[#8B1538]"})," ",t]},t))}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,types:!t.types})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Type"}),e.jsx(p,{className:`transition-transform ${c.types?"":"rotate-180"}`})]}),c.types&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:f.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:N.includes(t),onChange:s=>{s.target.checked?P(a=>[...a,t]):P(a=>a.filter(l=>l!==t))},className:"accent-[#8B1538]"})," ",t]},t))}),e.jsx("hr",{className:"my-3 border-[#9C1137]"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,price:!t.price})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Price"}),e.jsx(p,{className:`transition-transform ${c.price?"":"rotate-180"}`})]}),c.price&&e.jsxs("div",{className:"flex flex-col gap-3 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",value:m.min,onChange:t=>b(s=>({...s,min:Number(t.target.value)})),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Min"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",min:"0",value:m.max,onChange:t=>b(s=>({...s,max:Number(t.target.value)})),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Max"})]}),e.jsx("input",{type:"range",min:"0",max:"200000",step:"500",value:m.max,onChange:t=>b(s=>({...s,max:Number(t.target.value)})),className:"w-full accent-[#9C1137]"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Up to ₹",m.max]})]}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"w-full bg-[#9C1137] text-white py-2 px-4 rounded-lg font-semibold hover:bg-[#7e0f2d] transition",onClick:()=>h(!1),children:"Apply Filters"})})]})]})]}),e.jsx("div",{className:`grid ${r?"grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1"} gap-4 sm:gap-6 px-4 sm:px-6 md:px-10 lg:px-20 py-6`,children:I.map(t=>{const s=D.some(a=>a?.product?._id===t._id);return e.jsxs("div",{className:`p-3 rounded hover:shadow ${r?"":"flex flex-col md:flex-row items-center gap-4"}`,children:[e.jsx("div",{className:"cursor-pointer",onClick:()=>C(`/product/${t._id}`),children:e.jsx("img",{src:t.image,alt:t.product,className:`${r?"w-full h-[200px] sm:h-[250px] md:h-[300px] rounded-[20px] sm:rounded-[30px] object-contain":"w-full md:w-[200px] lg:w-[300px] h-[200px] md:h-[250px] object-contain rounded-[20px]"}`})}),e.jsxs("div",{className:`${r?"mt-2":"flex-1 flex flex-col justify-between mt-4 md:mt-0"}`,children:[e.jsx("h3",{className:`${r?"text-[14px] sm:text-[15px] font-[400] mt-2 cursor-pointer nunito-sans":"text-[20px] sm:text-[24px] md:text-[30px] mb-1 cursor-pointer nunito-sans"}`,onClick:()=>C(`/product/${t._id}`),children:r&&t.product.length>60?`${t.product.substring(0,60)}...`:t.product}),!r&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"flex gap-1",children:ee(t.rating)}),e.jsxs("span",{className:"text-sm",children:["(",t.rating,")"]})]}),e.jsxs("div",{className:`${r?"flex flex-col sm:flex-row sm:items-center sm:justify-between mt-2 gap-2":""}`,children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx("div",{className:`${r?"text-[16px] sm:text-[18px] md:text-[20px] font-[700]":"text-[24px] md:text-[30px] font-[700]"}`,children:v==="INR"?`₹ ${t?.price-t?.discount}`:`$ ${t?.usdPrice-t?.usdDiscount}`}),t.discount>0&&e.jsx("div",{className:`${r?"text-[12px] sm:text-[14px] text-[#838383] line-through":"text-[16px] md:text-[20px] text-[#838383] line-through"}`,children:v==="INR"?`₹${t.price}`:`${t.usdDiscount}`}),t.discount>0&&e.jsx("div",{className:`${r?"text-[12px] sm:text-[14px] text-[#DA2929] font-[600]":"text-[16px] md:text-[20px] text-[#DA2929] font-[600]"} flex items-center `,children:v==="INR"?`(₹${t.discount} Off)`:`($ ${t.usdDiscount} Off)`})]}),e.jsxs("div",{className:`${r?"flex items-center gap-4 justify-start sm:justify-end":"flex items-center gap-4 md:gap-10 flex-wrap"}`,children:[e.jsxs("button",{className:"text-[#222222] hover:text-black text-sm sm:text-base flex items-center gap-2",onClick:()=>se(t),children:[s?e.jsx(me,{color:"#9C1137"}):e.jsx(k,{}),!r&&"Add to Wishlist"]}),e.jsxs("button",{className:"text-[#222222] hover:text-black text-sm sm:text-base flex items-center gap-2",onClick:()=>{X(t),localStorage.getItem("token")?n.custom(l=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:[e.jsx(R,{className:"mt-1 text-lg text-white w-[28px] h-[28px]"}),e.jsxs("span",{children:[t.product," added to cart"]}),e.jsx("button",{className:"ml-2 text-white hover:text-gray-200",onClick:()=>n.dismiss(l),children:"✕"})]})):n.custom(l=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:["Please Log in to Add to Cart!!!",e.jsx("button",{className:"ml-2 text-white hover:text-gray-200",onClick:()=>n.dismiss(l),children:"✕"})]}))},children:[e.jsx(R,{})," ",!r&&"Add to Bag"]})]})]})]})]},t._id)})})]})}export{Ne as default};
