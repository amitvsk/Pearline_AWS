import{h as ne,r as l,d as ce,e as oe,f as xe,j as e,T as de,w as me,x as pe,y as he,I as ue,z as p,k as fe,F as C,B as T,v as c,l as u,C as ge,D as je,E as be}from"./index-C3pLFHLy.js";function ke(){const S=ne(),[r,$]=l.useState(!0),[o,E]=l.useState("Trending Now"),[H,F]=l.useState(!1),[W,h]=l.useState(!1),[n,x]=l.useState({availability:!0,category:!0,metals:!0,price:!0}),[d,B]=l.useState({inStock:!0,outOfStock:!1}),[M,z]=l.useState([]),[G,U]=l.useState([]),[q,J]=l.useState([]),[f,K]=l.useState([]),[g,I]=l.useState([]),[j,O]=l.useState([]),[b,A]=l.useState([]),[y,P]=l.useState([]),[m,N]=l.useState({min:0,max:1e5}),[w,Q]=l.useState(null),[ye,Ne]=l.useState([]),[V,X]=l.useState([]),[we,Y]=l.useState({categories:[],collections:[],metals:[],types:[]}),{addToCart:Z}=ce(),{currency:v}=oe(),{wishlist:L,removeFromWishlist:ee,addToWishlist:te}=xe();l.useEffect(()=>{const t=async()=>{try{const a=await u.get("https://pearline.in/product");console.log(a,",,,,,,,,,,,,,,,,,,,,,,"),X(a.data)}catch(a){console.error("Error fetching products:",a)}},s=async()=>{try{const[a,i]=await Promise.all([u.get("https://pearline.in/product/filters"),u.get("https://pearline.in/collection")]);Y(a.data),z(a.data.categories),J(a.data.metals),K(a.data.types),U(i.data)}catch(a){console.error("Error fetching filters:",a)}};t(),s(),window.scrollTo(0,0)},[]);const _=V.filter(t=>!!(d.inStock&&t.status==="Available"||d.outOfStock&&t.status==="Out of stock"||!d.inStock&&!d.outOfStock)).filter(t=>g.length===0||g.includes(t.category)).filter(t=>j.length===0||j.includes(t.collection?._id)).filter(t=>b.length===0||b.includes(t.metal)).filter(t=>y.length===0||y.includes(t.type)).filter(t=>t.price>=m.min&&t.price<=m.max).sort((t,s)=>{if(f.includes(o))return t.type===o&&s.type!==o?-1:s.type===o&&t.type!==o?1:0;switch(o){case"Rating - Highest":return s.rating-t.rating;case"Rating - Lowest":return t.rating-s.rating;case"Price Low to High":return t.price-s.price;case"Price High to Low":return s.price-t.price;default:return 0}}),se=t=>{const s=[],a=Math.floor(t),i=t%1>=.5;for(let k=0;k<a;k++)s.push(e.jsx(ge,{color:"#FFA600"},k));for(i&&s.push(e.jsx(je,{color:"#FFA600"},"half"));s.length<5;)s.push(e.jsx(be,{color:"#f5a623"},s.length));return s},ae=[...f,"Rating - Highest","Rating - Lowest","Price Low to High","Price High to Low"],le=t=>{L.some(a=>a.product._id===t._id)?(ee(t._id),localStorage.getItem("token")?c.custom(i=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 rounded-lg shadow-md text-[#9C1137] ",style:{backgroundColor:"#fff",border:"1px solid #9C1137"},children:[e.jsx(C,{className:"mt-1 text-lg text-[#9C1137] w-[28px] h-[28px]"}),t.product," removed from wishlist",e.jsx("button",{className:"ml-2 text-[#9c1137] hover:text-gray-200",onClick:()=>c.dismiss(i),children:"✕"})]})):c.custom(i=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:["Please Log in to remove from wishlist !!!",e.jsx("button",{className:"ml-2 text-white hover:text-gray-200",onClick:()=>c.dismiss(i),children:"✕"})]}))):(te(t),localStorage.getItem("token")?c.custom(i=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:[e.jsx(C,{className:"mt-1 text-lg text-white w-[28px] h-[28px]"}),t.product," added to wishlist",e.jsx("button",{className:"ml-2 text-white hover:text-gray-200",onClick:()=>c.dismiss(i),children:"✕"})]})):c.custom(i=>e.jsx("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:"Please Log in to add to the wishlist !!!"})))};l.useEffect(()=>{(async()=>{try{const s=await u.get("https://pearline.in/shopall/banner");s.data?.image&&(Q(s.data.image),ie(s.data.mobImage))}catch(s){console.error("Error fetching banner:",s)}})()},[]);const[D,ie]=l.useState(null),[re,R]=l.useState(w);return l.useEffect(()=>{const t=()=>{window.innerWidth<640?R(D):R(w)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[w,D]),e.jsxs("div",{className:"font-sans",children:[e.jsx(de,{position:"top-right",richColors:!0,closeButton:!0}),e.jsx("div",{className:`relative lg:w-full h-[400px] md:h-[450px] lg:h-[550px] xl:h-[650px] 2xl:h-[750px]\r
             bg-cover bg-top bg-no-repeat transition-all duration-500 rounded-2xl overflow-hidden w-[90%] mx-auto mt-36`,style:{backgroundImage:`url(${re||"/fallback.jpg"})`},children:e.jsx("div",{className:"absolute inset-0 bg-black/10"})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between border-b border-[#838383] py-3 bg-white px-4 sm:px-6 md:px-10 lg:px-20 h-auto md:h-[75px]",children:[e.jsxs("div",{className:"flex items-center justify-between w-full gap-2 py-2 pr-0 cursor-pointer md:pr-6 md:w-auto md:justify-start md:py-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[16px] sm:text-[18px] md:text-[20px] font-[400] text-[#000000]",onClick:()=>h(!0),style:{fontFamily:"Nunito Sans"},children:"Filter"}),e.jsx(me,{className:"text-[#9C1137] text-lg",onClick:()=>h(!0)})]}),e.jsxs("div",{className:"flex items-center gap-4 px-0 border-r-0 border-gray-300 md:px-6 md:border-r",children:[e.jsx("button",{className:`p-1 rounded ${r?"bg-[#9C1137]/10":""}`,onClick:()=>$(!0),children:e.jsx(pe,{className:`text-xl ${r?"text-[#9C1137]":"text-[#222222]"}`})}),e.jsx("button",{className:`p-1 rounded ${r?"":"bg-[#8B1538]/10"}`,onClick:()=>$(!1),children:e.jsx(he,{className:`text-xl ${r?"text-[#222222]":"text-[#8B1538]"}`})})]})]}),e.jsx("div",{className:"w-full px-0 py-2 text-center border-b-0 border-gray-200 md:px-6 md:border-b md:w-auto md:text-left md:py-0",children:e.jsxs("span",{className:"text-[16px] sm:text-[18px] md:text-[20px] font-[400] text-[#9C1137]",style:{fontFamily:"Nunito Sans"},children:[_.length," products"]})}),e.jsxs("div",{className:"relative flex items-center justify-center w-full gap-2 py-2 pl-0 border-b-0 border-gray-200 md:pl-6 md:border-b md:w-auto md:justify-start md:py-0",children:[e.jsx("span",{className:"text-[400] text-[16px] sm:text-[18px] md:text-[20px]",style:{fontFamily:"Nunito Sans"},children:"Sort by:"}),e.jsxs("button",{className:"flex items-center gap-1 text-[#000000] font-medium focus:outline-none",onClick:()=>F(t=>!t),style:{fontFamily:"Nunito Sans"},children:[o,e.jsx(ue,{className:"text-[#9C1137] ml-1"})]}),H&&e.jsx("ul",{className:"absolute right-0 z-20 w-48 mt-2 bg-white border border-gray-200 rounded shadow top-full",children:ae.map(t=>e.jsx("li",{className:"hover:bg-gray-100 px-4 py-2 cursor-pointer text-[#000000]",onClick:()=>{E(t),F(!1)},style:{fontFamily:"Nunito Sans"},children:t},t))})]})]}),W&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-30",onClick:()=>h(!1)}),e.jsxs("div",{className:"fixed top-0 left-0 z-50 w-64 h-full p-4 overflow-y-auto bg-white shadow-xl sm:p-6 sm:w-80 rounded-r-2xl",children:[e.jsx("button",{className:"absolute text-2xl text-gray-500 top-4 right-4 hover:text-black",onClick:()=>h(!1),children:"×"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,availability:!t.availability})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Availability"}),e.jsx(p,{className:`transition-transform ${n.availability?"":"rotate-180"}`})]}),n.availability&&e.jsxs("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:[e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:d.inStock,onChange:t=>B(s=>({...s,inStock:t.target.checked})),className:"accent-[#9C1137]"})," ","In Stock"]}),e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:d.outOfStock,onChange:t=>B(s=>({...s,outOfStock:t.target.checked})),className:"accent-[#9C1137]"})," ","Out of Stock"]})]}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,category:!t.category})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Category"}),e.jsx(p,{className:`transition-transform ${n.category?"":"rotate-180"}`})]}),n.category&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:M.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:g.includes(t),onChange:s=>{s.target.checked?I(a=>[...a,t]):I(a=>a.filter(i=>i!==t))},className:"accent-[#8B1538]"})," ",t]},t))}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,collections:!t.collections})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Collection"}),e.jsx(p,{className:`transition-transform ${n.collections?"":"rotate-180"}`})]}),n.collections&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:G.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:j.includes(t._id),onChange:s=>{s.target.checked?O(a=>[...a,t._id]):O(a=>a.filter(i=>i!==t._id))},className:"accent-[#8B1538]"}),t.title," "]},t._id))}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,metals:!t.metals})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Metals"}),e.jsx(p,{className:`transition-transform ${n.metals?"":"rotate-180"}`})]}),n.metals&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:q.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:b.includes(t),onChange:s=>{s.target.checked?A(a=>[...a,t]):A(a=>a.filter(i=>i!==t))},className:"accent-[#8B1538]"})," ",t]},t))}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,types:!t.types})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Type"}),e.jsx(p,{className:`transition-transform ${n.types?"":"rotate-180"}`})]}),n.types&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 ml-1",children:f.map(t=>e.jsxs("label",{className:"flex items-center gap-2 text-[14px]",children:[e.jsx("input",{type:"checkbox",checked:y.includes(t),onChange:s=>{s.target.checked?P(a=>[...a,t]):P(a=>a.filter(i=>i!==t))},className:"accent-[#8B1538]"})," ",t]},t))}),e.jsx("hr",{className:"my-3 border-[#9C1137]"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(t=>({...t,price:!t.price})),children:[e.jsx("span",{className:"font-[700] text-[18px]",children:"Price"}),e.jsx(p,{className:`transition-transform ${n.price?"":"rotate-180"}`})]}),n.price&&e.jsxs("div",{className:"flex flex-col gap-3 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",value:m.min,onChange:t=>N(s=>({...s,min:Number(t.target.value)})),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Min"}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",min:"0",value:m.max,onChange:t=>N(s=>({...s,max:Number(t.target.value)})),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Max"})]}),e.jsx("input",{type:"range",min:"0",max:"200000",step:"500",value:m.max,onChange:t=>N(s=>({...s,max:Number(t.target.value)})),className:"w-full accent-[#9C1137]"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Up to ₹",m.max]})]}),e.jsx("hr",{className:"my-3 border-[#9C1137]"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"w-full bg-[#9C1137] text-white py-2 px-4 rounded-lg font-semibold hover:bg-[#7e0f2d] transition",onClick:()=>h(!1),children:"Apply Filters"})})]})]})]}),e.jsx("div",{className:`grid ${r?"grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1"} gap-4 sm:gap-6 px-4 sm:px-6 md:px-10 lg:px-20 py-6`,children:_.map(t=>{const s=L.some(a=>a?.product?._id===t._id);return e.jsxs("div",{className:`p-3 rounded hover:shadow ${r?"":"flex flex-col md:flex-row items-center gap-4"}`,children:[e.jsx("div",{className:"cursor-pointer",onClick:()=>S(`/product/${t._id}`),children:e.jsx("img",{src:t.image,alt:t.product,className:`${r?"w-full h-[200px] sm:h-[250px] md:h-[300px] rounded-[20px] sm:rounded-[30px] object-contain":"w-full md:w-[200px] lg:w-[300px] h-[200px] md:h-[250px] object-contain rounded-[20px]"}`})}),e.jsxs("div",{className:`${r?"mt-2":"flex-1 flex flex-col justify-between mt-4 md:mt-0"}`,children:[e.jsx("h3",{className:`${r?"text-[14px] sm:text-[15px] font-[400] mt-2 cursor-pointer nunito-sans":"text-[20px] sm:text-[24px] md:text-[30px] mb-1 cursor-pointer nunito-sans"}`,onClick:()=>S(`/product/${t._id}`),children:r&&t.product.length>60?`${t.product.substring(0,60)}...`:t.product}),!r&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"flex gap-1",children:se(t.rating)}),e.jsxs("span",{className:"text-sm",children:["(",t.rating,")"]})]}),e.jsxs("div",{className:`${r?"flex flex-col sm:flex-row sm:items-center sm:justify-between mt-2 gap-2":""}`,children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx("div",{className:`${r?"text-[16px] sm:text-[18px] md:text-[20px] font-[700]":"text-[24px] md:text-[30px] font-[700]"}`,children:v==="INR"?`₹ ${t?.price-t?.discount}`:`$ ${t?.usdPrice-t?.usdDiscount}`}),t.discount>0&&e.jsx("div",{className:`${r?"text-[12px] sm:text-[14px] text-[#838383] line-through":"text-[16px] md:text-[20px] text-[#838383] line-through"}`,children:v==="INR"?`₹${t.price}`:`${t.usdDiscount}`}),t.discount>0&&e.jsx("div",{className:`${r?"text-[12px] sm:text-[14px] text-[#DA2929] font-[600]":"text-[16px] md:text-[20px] text-[#DA2929] font-[600]"} flex items-center `,children:v==="INR"?`(₹${t.discount} Off)`:`($ ${t.usdDiscount} Off)`})]}),e.jsxs("div",{className:`${r?"flex items-center gap-4 justify-start sm:justify-end":"flex items-center gap-4 md:gap-10 flex-wrap"}`,children:[e.jsxs("button",{className:"text-[#222222] hover:text-black text-sm sm:text-base flex items-center gap-2",onClick:()=>le(t),children:[s?e.jsx(fe,{color:"#9C1137"}):e.jsx(C,{}),!r&&"Add to Wishlist"]}),e.jsxs("button",{className:"text-[#222222] hover:text-black text-sm sm:text-base flex items-center gap-2",onClick:()=>{Z(t),localStorage.getItem("token")?c.custom(i=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:[e.jsx(T,{className:"mt-1 text-lg text-white w-[28px] h-[28px]"}),e.jsxs("span",{children:[t.product," added to cart"]}),e.jsx("button",{className:"ml-2 text-white hover:text-gray-200",onClick:()=>c.dismiss(i),children:"✕"})]})):c.custom(i=>e.jsxs("div",{className:"flex gap-2 px-4 py-2 text-white rounded-lg shadow-md ",style:{backgroundColor:"#9c1137"},children:["Please Log in to Add to Cart!!!",e.jsx("button",{className:"ml-2 text-white hover:text-gray-200",onClick:()=>c.dismiss(i),children:"✕"})]}))},children:[e.jsx(T,{})," ",!r&&"Add to Bag"]})]})]})]})]},t._id)})})]})}export{ke as default};
